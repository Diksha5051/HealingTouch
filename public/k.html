<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  <!-- =============================StyleSheet======================================== -->
  <style>
    #main {
      border: 1px black solid;
      width: 1200px;
    }
  </style>
  <!-- =============================Java Script======================================== -->
  <script>
    function doPre(refile, preving) {
      const [file] = refile.files
      if (file) {
        preving.src = URL.createObjectURL(file)
      }
    }

    $(document).ready(function () {

      // ======================================btnFetch jsooonnn======================
      // $("#btnFetch").click(function () {
      //     var emailKu = $("#inputEmail4").val();
      //     alert(emailKu);
      //     var obj = {
      //         type: "get",
      //         url: "/get-json-record-needy",
      //         data: { kuchEmail: emailKu }
      //     };


      //     // ...

      //     $.ajax(obj).done(function (reapJsonKuch) {

      //         alert(JSON.stringify(reapJsonKuch));

      //         if (reapJsonKuch.length == 1) {
      //             $("#inputname").val(reapJsonKuch[0].name);
      //             $("#inputAddress").val(reapJsonKuch[0].address);
      //             $("#inpcity").val(reapJsonKuch[0].citynm);
      //             $("#inputZip").val(reapJsonKuch[0].zip);
      //             $("#inputState").val(reapJsonKuch[0].state);
      //             $("#inputID").val(reapJsonKuch[0].idproof);
      //             $("#txttime").val(reapJsonKuch[0].txttime);
      //             $("#txttime2").val(reapJsonKuch[0].txttime2);
      //             $("#imgPre").prop("src", "upload/" + reapJsonKuch[0].photonm);
      //             $("#hdn").val(reapJsonKuch[0].photonm);
      //             $("#inputcontact").val(reapJsonKuch[0].contact);

      //             // Data received from the server,
      //             alert("Data found, enabling Update button.");
      //             $("#btnSave").prop("disabled", true);
      //             $("#btnUpdate").prop("disabled", false);
      //         } else {
      //             // No data received from the server,
      //             alert("No data found, enabling Save button.");
      //             $("#btnSave").prop("disabled", false);
      //             $("#btnUpdate").prop("disabled", true);

      //             // Clear the input fields if  no data to display
      //             $("#inputcontact").val("");
      //             $("#inputname").val("");
      //             $("#inputAddress").val("");
      //             $("#inpcity").val("");
      //             $("#inputZip").val("");
      //             $("#inputState").val("");
      //             $("#inputID").val("");
      //             $("#txttime").val("");
      //             $("#txttime2").val("");
      //             $("#imgPre").prop("src", "");
      //             $("#hdn").val("");
      //         }
      //     }).fail(function (err) {
      //         alert(JSON.stringify(err));
      //         alert(err);
      //     });




      $("#btnFetch").click(
        function () {
          // alert("tum");
          var emailKu = $("#inputEmail4").val();
          var obj = {
            type: "get",
            url: "/get-json-record-needy",
            data: {
              kuchEmail: emailKu
            }

          }
          $.ajax(obj).done(function (reapJsonKuch) {
            alert(JSON.stringify(reapJsonKuch));
            //alert(respJSONKuch);
            // $("#res").html(respJSONKuch);
            if (reapJsonKuch.length == 1) {
              $("#inputname").val(reapJsonKuch[0].name);
              $("#inputAddress").val(reapJsonKuch[0].address);
              $("#inputDob").val(reapJsonKuch[0].dob);
              $("#inputGender").val(reapJsonKuch[0].gender);

              $("#inputCity").val(reapJsonKuch[0].city);


              $("#imgPrev").prop("src", "uploads/" + reapJsonKuch[0].picname);
              //  $("#hdn").val(reapJsonKuch[0].photonm);
              $("#inputcontact").val(reapJsonKuch[0].phoneno);

              $("#btnUpdate").prop("disabled", false);

              //  $("#done").html("Update").attr("formaction","/profile-needyupdate");
            }
            else {
              $("#btnSave").prop("disabled", false);

              //  $("#done").html("Save").attr("formaction","/profile-needysubmit");

            }

          }).fail(function (errKuch) {
            alert(errKuch);
          })
        });
      // });

      // =============================set user email defautl=============================
     





    });


  </script>

</head>

<body>
  <!--==============================NAVBAR====================================-->
  <nav class=" navbar bg-body-tertiary">
    <div class="rows ms-5">

      <div class="col-12 ">
        <h1> <img src="pics/charity.png" width="50" alt=""> &ensp;HelpRxHaven</h1>
      </div>
    </div>

  </nav>
  <!-- ===============================================form================================================= -->
  <center>
    <div class="row mt-5 mb-0">
      <div class="col-md-8 offset-md-2">
        <center>
          <h1 style=" font-family: Gabriola, Times, serif; font-size: 2cm;">Fill Your Details</h1>
        </center>
      </div>
    </div>
    <div id="main" class="mt-5">

      <div class="row">
        <div class="col-md-12">
          <form method="post" enctype="multipart/form-data" class="row g-3">
            <div class="col-md-6">
              <label for="inputEmail4" class="form-label">Email</label>
              <input type="email" class="form-control" name="inputEmail4" id="inputEmail4">
            </div>
            <div class="col-md-2 mt-5 ">
              <button type="button" class="btn btn-primary  " id="btnFetch">Fetch</button>
            </div>
            <div class="col-md-5">
              <label for="inputname" class="form-label">Name</label>
              <input type="text" id="inputname" class="form-control" name="inputname">
            </div>
            <div class="col-md-4">
              <label for="inputcontact" class="form-label ">Contact
                Number</label>
              <input type="text" id="inputcontact" class="form-control" name="inputcontact">
            </div>
            <div class="row">
              <div class="col-9">
                <label for="inputAddress" class="form-label">Address</label>
                <input type="text" id="inputAddress" class="form-control" name="inputAddress"
                  placeholder="1234 Main St">
              </div>

              <div class="col-md-8">
                <label for="inputCity" class="form-label">City</label>
                <br>
                <select class="form-control" name="inputCity" id="inputCity">
                  <option selected disabled hidden>Choose
                    State or
                    Territories </option>
                  <option value="Andhra Pradesh">Andhra Pradesh</option>
                  <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Pradesh">Himachal Pradesh</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Madhya Pradesh">Madhya Pradesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Pradesh">Uttar Pradesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Andaman and Nicobar Islands">Andaman and Nicobar
                    Islands</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and
                    Nagar Haveli and Daman and Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Lakshadweep">Lakshadweep</option>

                </select>
              </div>

              <div class="col-md-4">
                <label for="inputDob" class="form-label">DOB</label>
                <input type="date" class="form-control" id="inputDob" name="inputDob">
              </div>
              <div class="col-md-4">
                <label for="inputGender" class="form-label">Gender</label>
                <select class="form-control" name="inputGender" id="inputGender">
                  <optgroup label="select gender"></optgroup>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
        
                </select>
                </div>
              <div class="col-md-4">
                <label for="formGroupExampleInput" class="form-label">Upload Aadhar Card pic</label><br>
                <input type="file" onchange="doPrev(this,imgPrev)" name="ppic" accept="image/*">
              </div>
              <div class="col-md-5">
                <img src id="imgPrev" alt width="100" height="100">
              </div>


              <div class="col-12 ">
                <button type="submit" class="btn btn-primary"   id="btnSave"  formaction="/proffile-needysubmit" 
                  disabled>Save</button>
                <button type="submit" class="btn btn-primary"  id="btnUpdate" formaction="/proffile-needyupdate" 
                  disabled>Update Account</button>
              </div>

            </div>
          </form>
        </div>
  </center>
  <!-- ===============================================form================================================= -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
</body>

</html>